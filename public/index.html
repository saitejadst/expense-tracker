<!DOCTYPE html>
<html>
<head>
  <title>Expense Tracker</title>
</head>
<body>
  <h1>Expense Tracker</h1>

  <h2>Add Transaction</h2>
  <form id="transactionForm">
    <label>Type:</label>
    <select id="type">
      <option value="income">Income</option>
      <option value="expense">Expense</option>
    </select><br><br>

    <label>Amount:</label>
    <input type="number" id="amount" required><br><br>

    <label>Description:</label>
    <input type="text" id="description"><br><br>

    <button type="submit">Add Transaction</button>
  </form>

  <h2>All Transactions</h2>
  <ul id="transactionsList"></ul>

  <h2>Summary</h2>
  <div id="summary"></div>

<script>
const form = document.getElementById('transactionForm');
const transactionsList = document.getElementById('transactionsList');
const summaryDiv = document.getElementById('summary');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const type = document.getElementById('type').value;
  const amount = parseFloat(document.getElementById('amount').value);
  const description = document.getElementById('description').value;

  await fetch('http://localhost:3000/transaction', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ type, amount, description })
  });

  loadTransactions();
  form.reset();
});

async function loadTransactions() {
  const transactions = await fetch('http://localhost:3000/transactions').then(res => res.json());
  transactionsList.innerHTML = transactions.map(t => `<li>${t.type} - ${t.amount} - ${t.description}</li>`).join('');

  const summary = await fetch('http://localhost:3000/summary').then(res => res.json());
  summaryDiv.innerHTML = `Income: ${summary.income}, Expense: ${summary.expense}, Balance: ${summary.balance}`;
}

loadTransactions();
</script>
</body>
</html>
